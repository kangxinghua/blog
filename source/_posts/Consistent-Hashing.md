---
title: 一致性哈希算法的理解与实践(Java)
date: 2016-10-26 22:41:42
tags: 算法
---
# 一致性哈希算法的理解与实践(Java)

## 概述
在维基百科中，是这么定义的
> 一致哈希是一种特殊的哈希算法。在使用一致哈希算法后，哈希表槽位数（大小）的改变平均只需要对 K/n个关键字重新映射，其中K是关键字的数量， n是槽位数量。然而在传统的哈希表中，添加或删除一个槽位的几乎需要对所有关键字进行重新映射。

## 引出
我们在上文中已经介绍了一致性Hash算法的基本优势，我们看到了该算法主要解决的问题是：当slot数发生变化时，能够尽量少的移动数据。那么，我们思考一下，普通的Hash算法是如何实现？又存在什么问题呢？
那么我们引出一个问题：
> 假设有1000w个数据项，100个存储节点，请设计一种算法合理地将他们存储在这些节点上。  

看一看普通Hash算法的原理：
![](/images/fe155f98-3a5e-11e6-834d-193e6f85afcd.png)

算法的核心计算如下